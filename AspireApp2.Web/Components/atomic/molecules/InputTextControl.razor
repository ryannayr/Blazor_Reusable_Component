@using System.Linq.Expressions
@using AspireApp2.Web.Components.atomic.interfaces
@using AspireApp2.Web.Components.atomic.models
@typeparam T where T : class

<FormInputLabel Label="@Label" IsRequired="IsRequired"></FormInputLabel>
@InputField(Model)
@if (IsRequired)
{
    <ValidationMessage For="@(() => ((ITextValue)Model).Value)" />
}

@code
{
    [Parameter] public required string Label { get; set; }
    [Parameter] public required bool IsRequired { get; set; }
    [Parameter] public required T Model { get; set; }
    [Parameter] public required RenderFragment<T> InputField { get; set; }
    
    protected override void OnParametersSet()
    {
        if (Model is IIsRequired requiredModel)
            requiredModel.IsRequired = IsRequired;
    }
}