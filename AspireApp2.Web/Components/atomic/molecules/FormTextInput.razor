@using System.Linq.Expressions
@typeparam T
<FormInputLabel Label="@Label" IsRequired="IsRequired"></FormInputLabel>
<FormBaseInput TValue="string" CssClass="@(isValid ? string.Empty : "is-invalid")" Value="@(((IStringValue)Model).Value)" ValueChanged="@((val) => ((IStringValue)Model).Value = val)"></FormBaseInput>
@if (IsRequired)
{
    <ValidationMessage For="@(() => ((IStringValue)Model).Value)" />
}

@code
{
    [Parameter] public required string Label { get; set; }
    [Parameter] public required bool IsRequired { get; set; }
    [Parameter] public required T Model { get; set; }

    [CascadingParameter] private EditContext CascadedEditContext { get; set; }
    private bool isValid = true;

    protected override void OnParametersSet()
    {
        if (IsRequired)
        {
            var errorMessages = CascadedEditContext.GetValidationMessages(() => ((IStringValue)Model).Value);
            isValid = !errorMessages.Any();
        }
    }
}